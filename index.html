{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red70\green137\blue204;\red23\green24\blue24;\red140\green211\blue254;
\red202\green202\blue202;\red109\green109\blue109;\red194\green126\blue101;\red212\green212\blue212;\red113\green192\blue131;
\red167\green197\blue152;\red109\green115\blue120;\red183\green111\blue247;\red54\green192\blue160;\red246\green124\blue48;
}
{\*\expandedcolortbl;;\cssrgb\c33725\c61176\c83922;\cssrgb\c11765\c12157\c12549;\cssrgb\c61176\c86275\c99608;
\cssrgb\c83137\c83137\c83137;\cssrgb\c50196\c50196\c50196;\cssrgb\c80784\c56863\c47059;\cssrgb\c86275\c86275\c86275;\cssrgb\c50588\c78824\c58431;
\cssrgb\c70980\c80784\c65882;\cssrgb\c50196\c52549\c54510;\cssrgb\c77255\c54118\c97647;\cssrgb\c23922\c78824\c69020;\cssrgb\c98039\c56471\c24314;
}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 <!DOCTYPE\cf4 \strokec4  html\cf2 \strokec2 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 <\cf2 \strokec2 html\cf5 \strokec5  \cf4 \strokec4 lang\cf6 \strokec6 =\cf7 \strokec7 "en"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf2 \strokec2 head\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3     \cf6 \strokec6 <\cf2 \strokec2 meta\cf5 \strokec5  \cf4 \strokec4 charset\cf6 \strokec6 =\cf7 \strokec7 "UTF-8"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 meta\cf5 \strokec5  \cf4 \strokec4 name\cf6 \strokec6 =\cf7 \strokec7 "viewport"\cf5 \strokec5  \cf4 \strokec4 content\cf6 \strokec6 =\cf7 \strokec7 "width=device-width, initial-scale=1.0"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 title\cf6 \strokec6 >\cf5 \strokec5 AK-47 Street Shooter\cf6 \strokec6 </\cf2 \strokec2 title\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 style\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 body\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  #333\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 color:\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-family:\cf5 \strokec5  \cf9 \strokec9 'Courier New'\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 Courier\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 monospace\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 flex\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 justify-content:\cf5 \strokec5  \cf7 \strokec7 center\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 align-items:\cf5 \strokec5  \cf7 \strokec7 center\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 height:\cf5 \strokec5  \cf10 \strokec10 100vh\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 margin:\cf5 \strokec5  \cf10 \strokec10 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 flex-direction:\cf5 \strokec5  \cf7 \strokec7 column\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 canvas\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-image:\cf5 \strokec5  \cb1 \
\cb3                 \cf7 \strokec7 linear-gradient(rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.07\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 2px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 2px\cf7 \strokec7 )\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                 \cf7 \strokec7 linear-gradient(\cf10 \strokec10 90deg\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.07\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 2px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 2px\cf7 \strokec7 )\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                 \cf7 \strokec7 linear-gradient(rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.05\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 1px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 1px\cf7 \strokec7 )\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                 \cf7 \strokec7 linear-gradient(\cf10 \strokec10 90deg\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.05\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 1px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 1px\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-size:\cf5 \strokec5  \cf10 \strokec10 100px\cf5 \strokec5  \cf10 \strokec10 100px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 100px\cf5 \strokec5  \cf10 \strokec10 100px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 20px\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 20px\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-position:\cf5 \strokec5  \cf10 \strokec10 -2px\cf5 \strokec5  \cf10 \strokec10 -2px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -2px\cf5 \strokec5  \cf10 \strokec10 -2px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -1px\cf5 \strokec5  \cf10 \strokec10 -1px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -1px\cf5 \strokec5  \cf10 \strokec10 -1px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  #4a4a4a\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border:\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf7 \strokec7 solid\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 block\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 /* Helps prevent extra space below canvas */\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #game-container\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 position:\cf5 \strokec5  \cf7 \strokec7 relative\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #ui-container\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 position:\cf5 \strokec5  \cf7 \strokec7 absolute\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 top:\cf5 \strokec5  \cf10 \strokec10 10px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 left:\cf5 \strokec5  \cf10 \strokec10 10px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 right:\cf5 \strokec5  \cf10 \strokec10 10px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 flex\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 justify-content:\cf5 \strokec5  \cf7 \strokec7 space-between\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-size:\cf5 \strokec5  \cf10 \strokec10 24px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 pointer-events:\cf5 \strokec5  \cf7 \strokec7 none\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 /* UI doesn't block mouse events for the game */\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 text-shadow:\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf10 \strokec10 4px\cf5 \strokec5  #000\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #message-box\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 position:\cf5 \strokec5  \cf7 \strokec7 absolute\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 top:\cf5 \strokec5  \cf10 \strokec10 50%\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 left:\cf5 \strokec5  \cf10 \strokec10 50%\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 transform:\cf5 \strokec5  \cf7 \strokec7 translate(\cf10 \strokec10 -50%\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -50%\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  \cf7 \strokec7 rgba(\cf10 \strokec10 0\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.7\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 padding:\cf5 \strokec5  \cf10 \strokec10 40px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border-radius:\cf5 \strokec5  \cf10 \strokec10 15px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 text-align:\cf5 \strokec5  \cf7 \strokec7 center\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-size:\cf5 \strokec5  \cf10 \strokec10 32px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 none\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 /* Initially hidden */\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 flex-direction:\cf5 \strokec5  \cf7 \strokec7 column\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 gap:\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #restart-button\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 padding:\cf5 \strokec5  \cf10 \strokec10 10px\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-size:\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 cursor:\cf5 \strokec5  \cf7 \strokec7 pointer\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border:\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf7 \strokec7 solid\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  #444\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 color:\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border-radius:\cf5 \strokec5  \cf10 \strokec10 5px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf2 \strokec2 style\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf2 \strokec2 head\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf2 \strokec2 body\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3     \cf6 \strokec6 <\cf2 \strokec2 h1\cf6 \strokec6 >\cf5 \strokec5 AK-47 Street Shooter\cf6 \strokec6 </\cf2 \strokec2 h1\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "game-container"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 canvas\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "gameCanvas"\cf6 \strokec6 ></\cf2 \strokec2 canvas\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "ui-container"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "health-ui"\cf6 \strokec6 >\cf5 \strokec5 Health: 100\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "ammo-ui"\cf6 \strokec6 >\cf5 \strokec5 Ammo: 30/120\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "level-ui"\cf6 \strokec6 >\cf5 \strokec5 Level: 1\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "score-ui"\cf6 \strokec6 >\cf5 \strokec5 Score: 0\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "message-box"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "message-text"\cf6 \strokec6 >\cf5 \strokec5 Game Over!\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 button\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "restart-button"\cf6 \strokec6 >\cf5 \strokec5 Restart Game\cf6 \strokec6 </\cf2 \strokec2 button\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 <\cf2 \strokec2 script\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 // --- Game Setup ---\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  canvas \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'gameCanvas'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  ctx \cf8 \strokec8 =\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 getContext\cf8 \strokec8 (\cf9 \strokec9 '2d'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  messagebox \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'message-box'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  messageText \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'message-text'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  restartButton \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'restart-button'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3         \cf11 \strokec11 // Set canvas dimensions based on window size\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  canvasWidth \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerWidth \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.9\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 800\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  canvasHeight \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerHeight \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.7\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 600\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  canvasWidth\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  canvasHeight\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'resize'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             canvasWidth \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerWidth \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.9\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 800\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             canvasHeight \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerHeight \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.7\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 600\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  canvasWidth\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  canvasHeight\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\
\cb3         \cf11 \strokec11 // --- Game State ---\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  player\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  enemies \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  bullets \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  items \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  keys \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\};\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  score \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  level \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  gameOver \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  gameRunning \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3         \cf11 \strokec11 // --- Game Classes ---\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Player\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 100\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 100\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Weapon\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 clipSize \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 120\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reloadTime \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 2000\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // 2 seconds\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Special Item\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleDuration \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 5000\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // 5 seconds\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speedBoost \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 3\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  x\cf8 \strokec8 :\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 :\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 \};\cf5 \strokec5  \cf11 \strokec11 // Default facing right\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Draw body\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 ?\cf5 \strokec5  \cf9 \strokec9 '#64E9FF'\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 '#0077BE'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                 \cf11 \strokec11 // Draw "head" / cockpit\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#ADD8E6'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // Draw gun pointing in the last direction\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  angle \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 atan2\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 save\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 translate\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 rotate\cf8 \strokec8 (\cf5 \strokec5 angle\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#555'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // The gun barrel\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 restore\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                 \cf11 \strokec11 // Draw health bar\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'red'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'green'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 *\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 /\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ),\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Reloading no longer stops movement.\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  currentSpeed \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive\cf8 \strokec8 )\{\cf5 \cb1 \strokec5 \
\cb3                     currentSpeed \cf8 \strokec8 +=\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speedBoost\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  moveX \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  moveY \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 'w'\cf8 \strokec8 ])\cf5 \strokec5  moveY \cf8 \strokec8 -=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 's'\cf8 \strokec8 ])\cf5 \strokec5  moveY \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 'a'\cf8 \strokec8 ])\cf5 \strokec5  moveX \cf8 \strokec8 -=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 'd'\cf8 \strokec8 ])\cf5 \strokec5  moveX \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 moveX \cf8 \strokec8 !==\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  moveY \cf8 \strokec8 !==\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 // Normalize vector to prevent faster diagonal movement\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  magnitude \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 sqrt\cf8 \strokec8 (\cf5 \strokec5 moveX \cf8 \strokec8 *\cf5 \strokec5  moveX \cf8 \strokec8 +\cf5 \strokec5  moveY \cf8 \strokec8 *\cf5 \strokec5  moveY\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  dirX \cf8 \strokec8 =\cf5 \strokec5  moveX \cf8 \strokec8 /\cf5 \strokec5  magnitude\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  dirY \cf8 \strokec8 =\cf5 \strokec5  moveY \cf8 \strokec8 /\cf5 \strokec5  magnitude\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                     \cf11 \strokec11 // Update last direction for shooting\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  dirX\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  dirY\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cb1 \
\cb3                     \cf11 \strokec11 // Calculate new position\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  nextX \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  dirX \cf8 \strokec8 *\cf5 \strokec5  currentSpeed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  nextY \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  dirY \cf8 \strokec8 *\cf5 \strokec5  currentSpeed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                     \cf11 \strokec11 // Boundary checks\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 nextX \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  nextX \cf8 \strokec8 <\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  nextX\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 nextY \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  nextY \cf8 \strokec8 <\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  nextY\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             shoot\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 ||\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf12 \strokec12 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip\cf8 \strokec8 --;\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Bullet direction is now based on where the player is facing.\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  bulletDirection \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // The direction is already normalized from the update() method.\cf5 \cb1 \strokec5 \
\cb3                 bullets\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Bullet\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  bulletDirection\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  bulletDirection\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             reload\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 ||\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 ===\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 clipSize\cf8 \strokec8 )\cf5 \strokec5  \cf12 \strokec12 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 setTimeout\cf8 \strokec8 (()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  ammoNeeded \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 clipSize \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  ammoToReload \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 ammoNeeded\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 +=\cf5 \strokec5  ammoToReload\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 -=\cf5 \strokec5  ammoToReload\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \},\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reloadTime\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             useSpecialItem\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Item is consumed\cf5 \cb1 \strokec5 \
\cb3                     setTimeout\cf8 \strokec8 (()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \},\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleDuration\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             takeDamage\cf8 \strokec8 (\cf5 \strokec5 amount\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 -=\cf5 \strokec5  amount\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     endGame\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Bullet\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  dx\cf8 \strokec8 ,\cf5 \strokec5  dy\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 radius \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dx \cf8 \strokec8 =\cf5 \strokec5  dx \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dy \cf8 \strokec8 =\cf5 \strokec5  dy \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'yellow'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 beginPath\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 arc\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 radius\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ,\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf13 \strokec13 PI\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fill\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +=\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dx\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +=\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dy\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Enemy\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  health\cf8 \strokec8 ,\cf5 \strokec5  speed\cf8 \strokec8 ,\cf5 \strokec5  damage\cf8 \strokec8 ,\cf5 \strokec5  size\cf8 \strokec8 ,\cf5 \strokec5  isBoss \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  size\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  size\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  health\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth \cf8 \strokec8 =\cf5 \strokec5  health\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed \cf8 \strokec8 =\cf5 \strokec5  speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 damage \cf8 \strokec8 =\cf5 \strokec5  damage\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isBoss \cf8 \strokec8 =\cf5 \strokec5  isBoss\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 color \cf8 \strokec8 =\cf5 \strokec5  isBoss \cf8 \strokec8 ?\cf5 \strokec5  \cf9 \strokec9 '#8B0000'\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 '#A52A2A'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Darker reds for enemies\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Body\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 color\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // Single "eye" to show they are robots\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isBoss \cf8 \strokec8 ?\cf5 \strokec5  \cf9 \strokec9 '#FFD700'\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 'white'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Gold eye for boss\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  eyeSize \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 3\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 -\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 eyeSize \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ),\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 ,\cf5 \strokec5  eyeSize\cf8 \strokec8 ,\cf5 \strokec5  eyeSize\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                 \cf11 \strokec11 // Boss gets "horns" or antennas\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isBoss\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#AAA'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // Draw health bar for enemies\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'orange'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'red'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 *\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 /\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ),\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Basic AI: Move towards the player\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  dx \cf8 \strokec8 =\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  dy \cf8 \strokec8 =\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  distance \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 sqrt\cf8 \strokec8 (\cf5 \strokec5 dx \cf8 \strokec8 *\cf5 \strokec5  dx \cf8 \strokec8 +\cf5 \strokec5  dy \cf8 \strokec8 *\cf5 \strokec5  dy\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 distance \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +=\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 dx \cf8 \strokec8 /\cf5 \strokec5  distance\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +=\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 dy \cf8 \strokec8 /\cf5 \strokec5  distance\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3                 \cf11 \strokec11 // Basic attack: Deal damage on collision with player\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 checkCollision\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 ,\cf5 \strokec5  player\cf8 \strokec8 ))\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     player\cf8 \strokec8 .\cf5 \strokec5 takeDamage\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 damage\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             takeDamage\cf8 \strokec8 (\cf5 \strokec5 amount\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 -=\cf5 \strokec5  amount\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Item\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  type\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 20\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 20\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 type \cf8 \strokec8 =\cf5 \strokec5  type\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // 'ammo', 'health', 'motorcycle'\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 save\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 shadowColor \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'rgba(0,0,0,0.5)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 shadowBlur \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 switch\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 type\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'ammo'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                         ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#f9a825'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Orange-yellow\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'health'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                         ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#76ff03'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Bright green\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'motorcycle'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                         ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#40c4ff'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Bright blue\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 restore\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'black'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 font \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '12px Courier New'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  initial \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 type\cf8 \strokec8 .\cf5 \strokec5 charAt\cf8 \strokec8 (\cf14 \strokec14 0\cf8 \strokec8 ).\cf5 \strokec5 toUpperCase\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillText\cf8 \strokec8 (\cf5 \strokec5 initial\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 6\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 14\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\
\cb3         \cf11 \strokec11 // --- Game Logic ---\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  init\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             gameOver \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             gameRunning \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             score \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             level \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             player \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Player\cf8 \strokec8 (\cf5 \strokec5 canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             enemies \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             bullets \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             items \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             keys \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\};\cf5 \cb1 \strokec5 \
\cb3             messagebox\cf8 \strokec8 .\cf5 \strokec5 style\cf8 \strokec8 .\cf5 \strokec5 display \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'none'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             spawnWave\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             updateUI\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             gameLoop\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  spawnWave\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  numEnemies \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 2\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 floor\cf8 \strokec8 (\cf5 \strokec5 level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 1.5\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 <\cf5 \strokec5  numEnemies\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 ++)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 spawnEnemy\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Boss spawn logic\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 level \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  level \cf8 \strokec8 %\cf5 \strokec5  \cf14 \strokec14 2\cf5 \strokec5  \cf8 \strokec8 ===\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 spawnBoss\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  spawnEnemy\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 let\cf5 \strokec5  x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // Spawn enemies off-screen\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 30\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 30\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 20\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  damage \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.1\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.05\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  size \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             enemies\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Enemy\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  health\cf8 \strokec8 ,\cf5 \strokec5  speed\cf8 \strokec8 ,\cf5 \strokec5  damage\cf8 \strokec8 ,\cf5 \strokec5  size\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  spawnBoss\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 let\cf5 \strokec5  x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 60\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 60\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 60\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 60\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 150\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 25\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.4\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.05\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  damage \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.3\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  size \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 60\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             enemies\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Enemy\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  health\cf8 \strokec8 ,\cf5 \strokec5  speed\cf8 \strokec8 ,\cf5 \strokec5  damage\cf8 \strokec8 ,\cf5 \strokec5  size\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  dropItem\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  rand \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 rand \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.1\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf11 \strokec11 // 10% chance for motorcycle\cf5 \cb1 \strokec5 \
\cb3                  items\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Item\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'motorcycle'\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 rand \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.4\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf11 \strokec11 // 30% chance for health\cf5 \cb1 \strokec5 \
\cb3                  items\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Item\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'health'\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 rand \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.8\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf11 \strokec11 // 40% chance for ammo\cf5 \cb1 \strokec5 \
\cb3                  items\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Item\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'ammo'\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // 20% chance for nothing\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  updateUI\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'health-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Health: \cf8 \strokec8 $\{\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 ceil\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 health\cf8 \strokec8 )\}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'ammo-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Ammo: \cf8 \strokec8 $\{\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 ammoInClip\cf8 \strokec8 \}\cf9 \strokec9 /\cf8 \strokec8 $\{\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'level-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Level: \cf8 \strokec8 $\{\cf5 \strokec5 level\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'score-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Score: \cf8 \strokec8 $\{\cf5 \strokec5 score\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 isReloading\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'ammo-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 +=\cf5 \strokec5  \cf9 \strokec9 ' (Reloading...)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle\cf8 \strokec8 )\{\cf5 \cb1 \strokec5 \
\cb3                  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'health-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 +=\cf5 \strokec5  \cf9 \strokec9 ' (E-Bike Ready)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive\cf8 \strokec8 )\{\cf5 \cb1 \strokec5 \
\cb3                  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'health-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 +=\cf5 \strokec5  \cf9 \strokec9 ' (SPEED BOOST!)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  checkCollision\cf8 \strokec8 (\cf5 \strokec5 rect1\cf8 \strokec8 ,\cf5 \strokec5  rect2\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 return\cf5 \strokec5  rect1\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 <\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                    rect1\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  rect1\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 >\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                    rect1\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 <\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                    rect1\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  rect1\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 >\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  gameLoop\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (!\cf5 \strokec5 gameRunning\cf8 \strokec8 )\cf5 \strokec5  \cf12 \strokec12 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             draw\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             requestAnimationFrame\cf8 \strokec8 (\cf5 \strokec5 gameLoop\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             player\cf8 \strokec8 .\cf5 \strokec5 update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Update bullets\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  bullets\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Remove bullets that are off-screen\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 x \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 x \cf8 \strokec8 >\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 ||\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 y \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 y \cf8 \strokec8 >\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     bullets\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 i\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Update enemies\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  enemies\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 enemies\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Collision detection: Bullets and Enemies\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  bullets\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  j \cf8 \strokec8 =\cf5 \strokec5  enemies\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  j \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  j\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 // Simple circle-to-rect collision\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  bullet \cf8 \strokec8 =\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  enemy \cf8 \strokec8 =\cf5 \strokec5  enemies\cf8 \strokec8 [\cf5 \strokec5 j\cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 bullet \cf8 \strokec8 &&\cf5 \strokec5  enemy \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 >\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 <\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 >\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 <\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cb1 \
\cb3                         enemy\cf8 \strokec8 .\cf5 \strokec5 takeDamage\cf8 \strokec8 (\cf14 \strokec14 10\cf8 \strokec8 );\cf5 \strokec5  \cf11 \strokec11 // Each bullet does 10 damage\cf5 \cb1 \strokec5 \
\cb3                         bullets\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 i\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \strokec5  \cf11 \strokec11 // Remove bullet on hit\cf5 \cb1 \strokec5 \
\cb3                         \cb1 \
\cb3                         \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 enemy\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 enemy\cf8 \strokec8 .\cf5 \strokec5 isBoss\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                                 score \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 500\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // High score bonus for boss\cf5 \cb1 \strokec5 \
\cb3                             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                                 score \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 100\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                             dropItem\cf8 \strokec8 (\cf5 \strokec5 enemy\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                             enemies\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 j\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Exit inner loop since bullet is gone\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Collision detection: Player and Items\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  items\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 checkCollision\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 ,\cf5 \strokec5  items\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ]))\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  item \cf8 \strokec8 =\cf5 \strokec5  items\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 switch\cf8 \strokec8 (\cf5 \strokec5 item\cf8 \strokec8 .\cf5 \strokec5 type\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'ammo'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                             player\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 +=\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 clipSize\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'health'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                             player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ,\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 25\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'motorcycle'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                             player\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                     items\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 i\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Check for level completion\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 enemies\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 ===\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 level\cf8 \strokec8 ++;\cf5 \cb1 \strokec5 \
\cb3                 spawnWave\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Give player some health and ammo between levels\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ,\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             updateUI\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // Clear canvas\cf5 \cb1 \strokec5 \
\cb3             ctx\cf8 \strokec8 .\cf5 \strokec5 clearRect\cf8 \strokec8 (\cf14 \strokec14 0\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ,\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Draw items first so they appear under other objects\cf5 \cb1 \strokec5 \
\cb3             items\cf8 \strokec8 .\cf5 \strokec5 forEach\cf8 \strokec8 (\cf5 \strokec5 item \cf8 \strokec8 =>\cf5 \strokec5  item\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ());\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Draw enemies\cf5 \cb1 \strokec5 \
\cb3             enemies\cf8 \strokec8 .\cf5 \strokec5 forEach\cf8 \strokec8 (\cf5 \strokec5 enemy \cf8 \strokec8 =>\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ());\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Draw bullets\cf5 \cb1 \strokec5 \
\cb3             bullets\cf8 \strokec8 .\cf5 \strokec5 forEach\cf8 \strokec8 (\cf5 \strokec5 bullet \cf8 \strokec8 =>\cf5 \strokec5  bullet\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ());\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Draw player on top\cf5 \cb1 \strokec5 \
\cb3             player\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  endGame\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             gameRunning \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             gameOver \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             messageText\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Game Over! Score: \cf8 \strokec8 $\{\cf5 \strokec5 score\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             messagebox\cf8 \strokec8 .\cf5 \strokec5 style\cf8 \strokec8 .\cf5 \strokec5 display \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'flex'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf11 \strokec11 // --- Event Listeners ---\cf5 \cb1 \strokec5 \
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'keydown'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             keys\cf8 \strokec8 [\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()]\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // Use a flag to prevent rapid firing from holding space\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 code \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'Space'\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 gameOver \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 isShooting\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                  player\cf8 \strokec8 .\cf5 \strokec5 shoot\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                  player\cf8 \strokec8 .\cf5 \strokec5 isShooting \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Set a flag\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'keyup'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             keys\cf8 \strokec8 [\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()]\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 code \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'Space'\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 isShooting \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Reset flag on key up\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'r'\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 gameOver\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 reload\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3              \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'e'\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 gameOver\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 useSpecialItem\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         restartButton\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'click'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             init\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\
\cb3         \cf11 \strokec11 // --- Start Game ---\cf5 \cb1 \strokec5 \
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 onload \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 function\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             init\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \};\cf5 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 </\cf2 \strokec2 script\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf2 \strokec2 body\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 </\cf2 \strokec2 html\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 <!DOCTYPE\cf4 \strokec4  html\cf2 \strokec2 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 <\cf2 \strokec2 html\cf5 \strokec5  \cf4 \strokec4 lang\cf6 \strokec6 =\cf7 \strokec7 "en"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf2 \strokec2 head\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3     \cf6 \strokec6 <\cf2 \strokec2 meta\cf5 \strokec5  \cf4 \strokec4 charset\cf6 \strokec6 =\cf7 \strokec7 "UTF-8"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 meta\cf5 \strokec5  \cf4 \strokec4 name\cf6 \strokec6 =\cf7 \strokec7 "viewport"\cf5 \strokec5  \cf4 \strokec4 content\cf6 \strokec6 =\cf7 \strokec7 "width=device-width, initial-scale=1.0"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 title\cf6 \strokec6 >\cf5 \strokec5 AK-47 Street Shooter\cf6 \strokec6 </\cf2 \strokec2 title\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 style\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 body\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  #333\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 color:\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-family:\cf5 \strokec5  \cf9 \strokec9 'Courier New'\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 Courier\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 monospace\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 flex\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 justify-content:\cf5 \strokec5  \cf7 \strokec7 center\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 align-items:\cf5 \strokec5  \cf7 \strokec7 center\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 height:\cf5 \strokec5  \cf10 \strokec10 100vh\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 margin:\cf5 \strokec5  \cf10 \strokec10 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 flex-direction:\cf5 \strokec5  \cf7 \strokec7 column\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 canvas\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-image:\cf5 \strokec5  \cb1 \
\cb3                 \cf7 \strokec7 linear-gradient(rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.07\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 2px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 2px\cf7 \strokec7 )\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                 \cf7 \strokec7 linear-gradient(\cf10 \strokec10 90deg\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.07\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 2px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 2px\cf7 \strokec7 )\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                 \cf7 \strokec7 linear-gradient(rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.05\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 1px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 1px\cf7 \strokec7 )\cf8 \strokec8 ,\cf5 \cb1 \strokec5 \
\cb3                 \cf7 \strokec7 linear-gradient(\cf10 \strokec10 90deg\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 rgba(\cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 255\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.05\cf7 \strokec7 )\cf5 \strokec5  \cf10 \strokec10 1px\cf8 \strokec8 ,\cf5 \strokec5  \cf7 \strokec7 transparent\cf5 \strokec5  \cf10 \strokec10 1px\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-size:\cf5 \strokec5  \cf10 \strokec10 100px\cf5 \strokec5  \cf10 \strokec10 100px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 100px\cf5 \strokec5  \cf10 \strokec10 100px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 20px\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 20px\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-position:\cf5 \strokec5  \cf10 \strokec10 -2px\cf5 \strokec5  \cf10 \strokec10 -2px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -2px\cf5 \strokec5  \cf10 \strokec10 -2px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -1px\cf5 \strokec5  \cf10 \strokec10 -1px\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -1px\cf5 \strokec5  \cf10 \strokec10 -1px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  #4a4a4a\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border:\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf7 \strokec7 solid\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 block\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 /* Helps prevent extra space below canvas */\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #game-container\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 position:\cf5 \strokec5  \cf7 \strokec7 relative\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #ui-container\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 position:\cf5 \strokec5  \cf7 \strokec7 absolute\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 top:\cf5 \strokec5  \cf10 \strokec10 10px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 left:\cf5 \strokec5  \cf10 \strokec10 10px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 right:\cf5 \strokec5  \cf10 \strokec10 10px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 flex\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 justify-content:\cf5 \strokec5  \cf7 \strokec7 space-between\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-size:\cf5 \strokec5  \cf10 \strokec10 24px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 pointer-events:\cf5 \strokec5  \cf7 \strokec7 none\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 /* UI doesn't block mouse events for the game */\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 text-shadow:\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf10 \strokec10 4px\cf5 \strokec5  #000\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #message-box\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 position:\cf5 \strokec5  \cf7 \strokec7 absolute\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 top:\cf5 \strokec5  \cf10 \strokec10 50%\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 left:\cf5 \strokec5  \cf10 \strokec10 50%\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 transform:\cf5 \strokec5  \cf7 \strokec7 translate(\cf10 \strokec10 -50%\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 -50%\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  \cf7 \strokec7 rgba(\cf10 \strokec10 0\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0\cf8 \strokec8 ,\cf5 \strokec5  \cf10 \strokec10 0.7\cf7 \strokec7 )\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 padding:\cf5 \strokec5  \cf10 \strokec10 40px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border-radius:\cf5 \strokec5  \cf10 \strokec10 15px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 text-align:\cf5 \strokec5  \cf7 \strokec7 center\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-size:\cf5 \strokec5  \cf10 \strokec10 32px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 display:\cf5 \strokec5  \cf7 \strokec7 none\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 /* Initially hidden */\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 flex-direction:\cf5 \strokec5  \cf7 \strokec7 column\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 gap:\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf2 \strokec2 #restart-button\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 padding:\cf5 \strokec5  \cf10 \strokec10 10px\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 font-size:\cf5 \strokec5  \cf10 \strokec10 20px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 cursor:\cf5 \strokec5  \cf7 \strokec7 pointer\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border:\cf5 \strokec5  \cf10 \strokec10 2px\cf5 \strokec5  \cf7 \strokec7 solid\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 background-color:\cf5 \strokec5  #444\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 color:\cf5 \strokec5  #fff\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf4 \strokec4 border-radius:\cf5 \strokec5  \cf10 \strokec10 5px\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf2 \strokec2 style\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf2 \strokec2 head\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 <\cf2 \strokec2 body\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf5 \cb3     \cf6 \strokec6 <\cf2 \strokec2 h1\cf6 \strokec6 >\cf5 \strokec5 AK-47 Street Shooter\cf6 \strokec6 </\cf2 \strokec2 h1\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "game-container"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 canvas\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "gameCanvas"\cf6 \strokec6 ></\cf2 \strokec2 canvas\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "ui-container"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "health-ui"\cf6 \strokec6 >\cf5 \strokec5 Health: 100\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "ammo-ui"\cf6 \strokec6 >\cf5 \strokec5 Ammo: 30/120\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "level-ui"\cf6 \strokec6 >\cf5 \strokec5 Level: 1\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "score-ui"\cf6 \strokec6 >\cf5 \strokec5 Score: 0\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "message-box"\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 div\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "message-text"\cf6 \strokec6 >\cf5 \strokec5 Game Over!\cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3             \cf6 \strokec6 <\cf2 \strokec2 button\cf5 \strokec5  \cf4 \strokec4 id\cf6 \strokec6 =\cf7 \strokec7 "restart-button"\cf6 \strokec6 >\cf5 \strokec5 Restart Game\cf6 \strokec6 </\cf2 \strokec2 button\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3     \cf6 \strokec6 </\cf2 \strokec2 div\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 <\cf2 \strokec2 script\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cb3         \cf11 \strokec11 // --- Game Setup ---\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  canvas \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'gameCanvas'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  ctx \cf8 \strokec8 =\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 getContext\cf8 \strokec8 (\cf9 \strokec9 '2d'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  messagebox \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'message-box'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  messageText \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'message-text'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 const\cf5 \strokec5  restartButton \cf8 \strokec8 =\cf5 \strokec5  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'restart-button'\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3         \cf11 \strokec11 // Set canvas dimensions based on window size\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  canvasWidth \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerWidth \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.9\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 800\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  canvasHeight \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerHeight \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.7\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 600\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  canvasWidth\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  canvasHeight\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'resize'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             canvasWidth \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerWidth \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.9\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 800\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             canvasHeight \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 window\cf8 \strokec8 .\cf5 \strokec5 innerHeight \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.7\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 600\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  canvasWidth\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  canvasHeight\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\
\cb3         \cf11 \strokec11 // --- Game State ---\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  player\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  enemies \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  bullets \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  items \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  keys \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\};\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  score \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  level \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  gameOver \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 let\cf5 \strokec5  gameRunning \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3         \cf11 \strokec11 // --- Game Classes ---\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Player\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 100\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 100\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Weapon\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 clipSize \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 120\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reloadTime \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 2000\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // 2 seconds\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Special Item\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleDuration \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 5000\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // 5 seconds\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speedBoost \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 3\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  x\cf8 \strokec8 :\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 :\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 \};\cf5 \strokec5  \cf11 \strokec11 // Default facing right\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Draw body\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 ?\cf5 \strokec5  \cf9 \strokec9 '#64E9FF'\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 '#0077BE'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                 \cf11 \strokec11 // Draw "head" / cockpit\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#ADD8E6'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // Draw gun pointing in the last direction\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  angle \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 atan2\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 save\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 translate\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 rotate\cf8 \strokec8 (\cf5 \strokec5 angle\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#555'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // The gun barrel\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 restore\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                 \cf11 \strokec11 // Draw health bar\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'red'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'green'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 *\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 /\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ),\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Reloading no longer stops movement.\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  currentSpeed \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive\cf8 \strokec8 )\{\cf5 \cb1 \strokec5 \
\cb3                     currentSpeed \cf8 \strokec8 +=\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speedBoost\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  moveX \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  moveY \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 'w'\cf8 \strokec8 ])\cf5 \strokec5  moveY \cf8 \strokec8 -=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 's'\cf8 \strokec8 ])\cf5 \strokec5  moveY \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 'a'\cf8 \strokec8 ])\cf5 \strokec5  moveX \cf8 \strokec8 -=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 keys\cf8 \strokec8 [\cf9 \strokec9 'd'\cf8 \strokec8 ])\cf5 \strokec5  moveX \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 moveX \cf8 \strokec8 !==\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  moveY \cf8 \strokec8 !==\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 // Normalize vector to prevent faster diagonal movement\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  magnitude \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 sqrt\cf8 \strokec8 (\cf5 \strokec5 moveX \cf8 \strokec8 *\cf5 \strokec5  moveX \cf8 \strokec8 +\cf5 \strokec5  moveY \cf8 \strokec8 *\cf5 \strokec5  moveY\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  dirX \cf8 \strokec8 =\cf5 \strokec5  moveX \cf8 \strokec8 /\cf5 \strokec5  magnitude\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  dirY \cf8 \strokec8 =\cf5 \strokec5  moveY \cf8 \strokec8 /\cf5 \strokec5  magnitude\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                     \cf11 \strokec11 // Update last direction for shooting\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  dirX\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  dirY\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cb1 \
\cb3                     \cf11 \strokec11 // Calculate new position\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  nextX \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  dirX \cf8 \strokec8 *\cf5 \strokec5  currentSpeed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  nextY \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  dirY \cf8 \strokec8 *\cf5 \strokec5  currentSpeed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                     \cf11 \strokec11 // Boundary checks\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 nextX \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  nextX \cf8 \strokec8 <\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  nextX\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 nextY \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  nextY \cf8 \strokec8 <\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  nextY\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             shoot\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 ||\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf12 \strokec12 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip\cf8 \strokec8 --;\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Bullet direction is now based on where the player is facing.\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 let\cf5 \strokec5  bulletDirection \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 lastDirection\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // The direction is already normalized from the update() method.\cf5 \cb1 \strokec5 \
\cb3                 bullets\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Bullet\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  bulletDirection\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  bulletDirection\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             reload\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 ||\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 ===\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 clipSize\cf8 \strokec8 )\cf5 \strokec5  \cf12 \strokec12 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 setTimeout\cf8 \strokec8 (()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  ammoNeeded \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 clipSize \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  ammoToReload \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 ammoNeeded\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 ammoInClip \cf8 \strokec8 +=\cf5 \strokec5  ammoToReload\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 -=\cf5 \strokec5  ammoToReload\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isReloading \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \},\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 reloadTime\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             useSpecialItem\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Item is consumed\cf5 \cb1 \strokec5 \
\cb3                     setTimeout\cf8 \strokec8 (()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \},\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 motorcycleDuration\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             takeDamage\cf8 \strokec8 (\cf5 \strokec5 amount\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 -=\cf5 \strokec5  amount\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     endGame\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Bullet\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  dx\cf8 \strokec8 ,\cf5 \strokec5  dy\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 radius \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dx \cf8 \strokec8 =\cf5 \strokec5  dx \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dy \cf8 \strokec8 =\cf5 \strokec5  dy \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'yellow'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 beginPath\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 arc\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 radius\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ,\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf13 \strokec13 PI\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fill\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +=\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dx\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +=\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 dy\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Enemy\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  health\cf8 \strokec8 ,\cf5 \strokec5  speed\cf8 \strokec8 ,\cf5 \strokec5  damage\cf8 \strokec8 ,\cf5 \strokec5  size\cf8 \strokec8 ,\cf5 \strokec5  isBoss \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  size\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  size\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  health\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth \cf8 \strokec8 =\cf5 \strokec5  health\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed \cf8 \strokec8 =\cf5 \strokec5  speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 damage \cf8 \strokec8 =\cf5 \strokec5  damage\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isBoss \cf8 \strokec8 =\cf5 \strokec5  isBoss\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 color \cf8 \strokec8 =\cf5 \strokec5  isBoss \cf8 \strokec8 ?\cf5 \strokec5  \cf9 \strokec9 '#8B0000'\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 '#A52A2A'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Darker reds for enemies\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Body\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 color\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // Single "eye" to show they are robots\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isBoss \cf8 \strokec8 ?\cf5 \strokec5  \cf9 \strokec9 '#FFD700'\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  \cf9 \strokec9 'white'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Gold eye for boss\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  eyeSize \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 3\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 -\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 eyeSize \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ),\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 ,\cf5 \strokec5  eyeSize\cf8 \strokec8 ,\cf5 \strokec5  eyeSize\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3                 \cf11 \strokec11 // Boss gets "horns" or antennas\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 isBoss\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#AAA'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                     ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cb1 \
\cb3                 \cf11 \strokec11 // Draw health bar for enemies\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'orange'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'red'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 *\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 /\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ),\cf5 \strokec5  \cf14 \strokec14 4\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Basic AI: Move towards the player\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  dx \cf8 \strokec8 =\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  dy \cf8 \strokec8 =\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 -\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  distance \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 sqrt\cf8 \strokec8 (\cf5 \strokec5 dx \cf8 \strokec8 *\cf5 \strokec5  dx \cf8 \strokec8 +\cf5 \strokec5  dy \cf8 \strokec8 *\cf5 \strokec5  dy\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 distance \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +=\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 dx \cf8 \strokec8 /\cf5 \strokec5  distance\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +=\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 dy \cf8 \strokec8 /\cf5 \strokec5  distance\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 speed\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3                 \cf11 \strokec11 // Basic attack: Deal damage on collision with player\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 checkCollision\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 ,\cf5 \strokec5  player\cf8 \strokec8 ))\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     player\cf8 \strokec8 .\cf5 \strokec5 takeDamage\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 damage\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             takeDamage\cf8 \strokec8 (\cf5 \strokec5 amount\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 -=\cf5 \strokec5  amount\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 class\cf5 \strokec5  \cf13 \strokec13 Item\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 constructor\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  type\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 =\cf5 \strokec5  x\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 =\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 20\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 20\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 type \cf8 \strokec8 =\cf5 \strokec5  type\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // 'ammo', 'health', 'motorcycle'\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 save\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 shadowColor \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'rgba(0,0,0,0.5)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 shadowBlur \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 switch\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 type\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'ammo'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                         ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#f9a825'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Orange-yellow\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'health'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                         ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#76ff03'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Bright green\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'motorcycle'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                         ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '#40c4ff'\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Bright blue\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillRect\cf8 \strokec8 (\cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 restore\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillStyle \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'black'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 font \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 '12px Courier New'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 const\cf5 \strokec5  initial \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 type\cf8 \strokec8 .\cf5 \strokec5 charAt\cf8 \strokec8 (\cf14 \strokec14 0\cf8 \strokec8 ).\cf5 \strokec5 toUpperCase\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 ctx\cf8 \strokec8 .\cf5 \strokec5 fillText\cf8 \strokec8 (\cf5 \strokec5 initial\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 6\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 this\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 14\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\
\cb3         \cf11 \strokec11 // --- Game Logic ---\cf5 \cb1 \strokec5 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  init\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             gameOver \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             gameRunning \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             score \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             level \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             player \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Player\cf8 \strokec8 (\cf5 \strokec5 canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 ,\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 /\cf5 \strokec5  \cf14 \strokec14 2\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             enemies \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             bullets \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             items \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 [];\cf5 \cb1 \strokec5 \
\cb3             keys \cf8 \strokec8 =\cf5 \strokec5  \cf8 \strokec8 \{\};\cf5 \cb1 \strokec5 \
\cb3             messagebox\cf8 \strokec8 .\cf5 \strokec5 style\cf8 \strokec8 .\cf5 \strokec5 display \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'none'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             spawnWave\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             updateUI\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             gameLoop\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  spawnWave\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  numEnemies \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 2\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 floor\cf8 \strokec8 (\cf5 \strokec5 level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 1.5\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 <\cf5 \strokec5  numEnemies\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 ++)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 spawnEnemy\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Boss spawn logic\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 level \cf8 \strokec8 >\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  level \cf8 \strokec8 %\cf5 \strokec5  \cf14 \strokec14 2\cf5 \strokec5  \cf8 \strokec8 ===\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 spawnBoss\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  spawnEnemy\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 let\cf5 \strokec5  x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // Spawn enemies off-screen\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 30\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 30\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 20\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 5\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  damage \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.1\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.05\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  size \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 30\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             enemies\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Enemy\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  health\cf8 \strokec8 ,\cf5 \strokec5  speed\cf8 \strokec8 ,\cf5 \strokec5  damage\cf8 \strokec8 ,\cf5 \strokec5  size\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  spawnBoss\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 let\cf5 \strokec5  x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 60\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 60\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 x \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 *\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                 y \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.5\cf5 \strokec5  \cf8 \strokec8 ?\cf5 \strokec5  \cf8 \strokec8 -\cf14 \strokec14 60\cf5 \strokec5  \cf8 \strokec8 :\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 60\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  health \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 150\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 25\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  speed \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.4\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.05\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  damage \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 0.3\cf5 \strokec5  \cf8 \strokec8 +\cf5 \strokec5  level \cf8 \strokec8 *\cf5 \strokec5  \cf14 \strokec14 0.1\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  size \cf8 \strokec8 =\cf5 \strokec5  \cf14 \strokec14 60\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             enemies\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Enemy\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  health\cf8 \strokec8 ,\cf5 \strokec5  speed\cf8 \strokec8 ,\cf5 \strokec5  damage\cf8 \strokec8 ,\cf5 \strokec5  size\cf8 \strokec8 ,\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  dropItem\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 const\cf5 \strokec5  rand \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 random\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 rand \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.1\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf11 \strokec11 // 10% chance for motorcycle\cf5 \cb1 \strokec5 \
\cb3                  items\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Item\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'motorcycle'\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 rand \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.4\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf11 \strokec11 // 30% chance for health\cf5 \cb1 \strokec5 \
\cb3                  items\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Item\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'health'\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 rand \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0.8\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \strokec5  \cf11 \strokec11 // 40% chance for ammo\cf5 \cb1 \strokec5 \
\cb3                  items\cf8 \strokec8 .\cf5 \strokec5 push\cf8 \strokec8 (\cf12 \strokec12 new\cf5 \strokec5  \cf13 \strokec13 Item\cf8 \strokec8 (\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  y\cf8 \strokec8 ,\cf5 \strokec5  \cf9 \strokec9 'ammo'\cf8 \strokec8 ));\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // 20% chance for nothing\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  updateUI\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'health-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Health: \cf8 \strokec8 $\{\cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 ceil\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 health\cf8 \strokec8 )\}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'ammo-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Ammo: \cf8 \strokec8 $\{\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 ammoInClip\cf8 \strokec8 \}\cf9 \strokec9 /\cf8 \strokec8 $\{\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'level-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Level: \cf8 \strokec8 $\{\cf5 \strokec5 level\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'score-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Score: \cf8 \strokec8 $\{\cf5 \strokec5 score\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 isReloading\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'ammo-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 +=\cf5 \strokec5  \cf9 \strokec9 ' (Reloading...)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle\cf8 \strokec8 )\{\cf5 \cb1 \strokec5 \
\cb3                  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'health-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 +=\cf5 \strokec5  \cf9 \strokec9 ' (E-Bike Ready)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 motorcycleActive\cf8 \strokec8 )\{\cf5 \cb1 \strokec5 \
\cb3                  document\cf8 \strokec8 .\cf5 \strokec5 getElementById\cf8 \strokec8 (\cf9 \strokec9 'health-ui'\cf8 \strokec8 ).\cf5 \strokec5 textContent \cf8 \strokec8 +=\cf5 \strokec5  \cf9 \strokec9 ' (SPEED BOOST!)'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         \cf12 \strokec12 function\cf5 \strokec5  checkCollision\cf8 \strokec8 (\cf5 \strokec5 rect1\cf8 \strokec8 ,\cf5 \strokec5  rect2\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 return\cf5 \strokec5  rect1\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 <\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                    rect1\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  rect1\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 >\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                    rect1\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 <\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                    rect1\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  rect1\cf8 \strokec8 .\cf5 \strokec5 height \cf8 \strokec8 >\cf5 \strokec5  rect2\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  gameLoop\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (!\cf5 \strokec5 gameRunning\cf8 \strokec8 )\cf5 \strokec5  \cf12 \strokec12 return\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\
\cb3             update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             draw\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             requestAnimationFrame\cf8 \strokec8 (\cf5 \strokec5 gameLoop\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  update\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             player\cf8 \strokec8 .\cf5 \strokec5 update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Update bullets\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  bullets\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Remove bullets that are off-screen\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 x \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 x \cf8 \strokec8 >\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 ||\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 y \cf8 \strokec8 <\cf5 \strokec5  \cf14 \strokec14 0\cf5 \strokec5  \cf8 \strokec8 ||\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 y \cf8 \strokec8 >\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     bullets\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 i\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Update enemies\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  enemies\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 enemies\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ].\cf5 \strokec5 update\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Collision detection: Bullets and Enemies\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  bullets\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  j \cf8 \strokec8 =\cf5 \strokec5  enemies\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  j \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  j\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf11 \strokec11 // Simple circle-to-rect collision\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  bullet \cf8 \strokec8 =\cf5 \strokec5  bullets\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  enemy \cf8 \strokec8 =\cf5 \strokec5  enemies\cf8 \strokec8 [\cf5 \strokec5 j\cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 bullet \cf8 \strokec8 &&\cf5 \strokec5  enemy \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 >\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 <\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 x \cf8 \strokec8 +\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 width \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 >\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 &&\cf5 \cb1 \strokec5 \
\cb3                         bullet\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 <\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 y \cf8 \strokec8 +\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cb1 \
\cb3                         enemy\cf8 \strokec8 .\cf5 \strokec5 takeDamage\cf8 \strokec8 (\cf14 \strokec14 10\cf8 \strokec8 );\cf5 \strokec5  \cf11 \strokec11 // Each bullet does 10 damage\cf5 \cb1 \strokec5 \
\cb3                         bullets\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 i\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \strokec5  \cf11 \strokec11 // Remove bullet on hit\cf5 \cb1 \strokec5 \
\cb3                         \cb1 \
\cb3                         \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 enemy\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 <=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 enemy\cf8 \strokec8 .\cf5 \strokec5 isBoss\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                                 score \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 500\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // High score bonus for boss\cf5 \cb1 \strokec5 \
\cb3                             \cf8 \strokec8 \}\cf5 \strokec5  \cf12 \strokec12 else\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                                 score \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 100\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                             dropItem\cf8 \strokec8 (\cf5 \strokec5 enemy\cf8 \strokec8 .\cf5 \strokec5 x\cf8 \strokec8 ,\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 y\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                             enemies\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 j\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Exit inner loop since bullet is gone\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Collision detection: Player and Items\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 for\cf5 \strokec5  \cf8 \strokec8 (\cf12 \strokec12 let\cf5 \strokec5  i \cf8 \strokec8 =\cf5 \strokec5  items\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 -\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 ;\cf5 \strokec5  i \cf8 \strokec8 >=\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ;\cf5 \strokec5  i\cf8 \strokec8 --)\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 checkCollision\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 ,\cf5 \strokec5  items\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ]))\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 const\cf5 \strokec5  item \cf8 \strokec8 =\cf5 \strokec5  items\cf8 \strokec8 [\cf5 \strokec5 i\cf8 \strokec8 ];\cf5 \cb1 \strokec5 \
\cb3                     \cf12 \strokec12 switch\cf8 \strokec8 (\cf5 \strokec5 item\cf8 \strokec8 .\cf5 \strokec5 type\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'ammo'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                             player\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 +=\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 clipSize\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'health'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                             player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ,\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 25\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                         \cf12 \strokec12 case\cf5 \strokec5  \cf9 \strokec9 'motorcycle'\cf8 \strokec8 :\cf5 \cb1 \strokec5 \
\cb3                             player\cf8 \strokec8 .\cf5 \strokec5 hasMotorcycle \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                             \cf12 \strokec12 break\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3                     \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3                     items\cf8 \strokec8 .\cf5 \strokec5 splice\cf8 \strokec8 (\cf5 \strokec5 i\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 1\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Check for level completion\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 enemies\cf8 \strokec8 .\cf5 \strokec5 length \cf8 \strokec8 ===\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 level\cf8 \strokec8 ++;\cf5 \cb1 \strokec5 \
\cb3                 spawnWave\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                 \cf11 \strokec11 // Give player some health and ammo between levels\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 =\cf5 \strokec5  \cf13 \strokec13 Math\cf8 \strokec8 .\cf5 \strokec5 min\cf8 \strokec8 (\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 maxHealth\cf8 \strokec8 ,\cf5 \strokec5  player\cf8 \strokec8 .\cf5 \strokec5 health \cf8 \strokec8 +\cf5 \strokec5  \cf14 \strokec14 10\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 reserveAmmo \cf8 \strokec8 +=\cf5 \strokec5  \cf14 \strokec14 15\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             updateUI\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  draw\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // Clear canvas\cf5 \cb1 \strokec5 \
\cb3             ctx\cf8 \strokec8 .\cf5 \strokec5 clearRect\cf8 \strokec8 (\cf14 \strokec14 0\cf8 \strokec8 ,\cf5 \strokec5  \cf14 \strokec14 0\cf8 \strokec8 ,\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 width\cf8 \strokec8 ,\cf5 \strokec5  canvas\cf8 \strokec8 .\cf5 \strokec5 height\cf8 \strokec8 );\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Draw items first so they appear under other objects\cf5 \cb1 \strokec5 \
\cb3             items\cf8 \strokec8 .\cf5 \strokec5 forEach\cf8 \strokec8 (\cf5 \strokec5 item \cf8 \strokec8 =>\cf5 \strokec5  item\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ());\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Draw enemies\cf5 \cb1 \strokec5 \
\cb3             enemies\cf8 \strokec8 .\cf5 \strokec5 forEach\cf8 \strokec8 (\cf5 \strokec5 enemy \cf8 \strokec8 =>\cf5 \strokec5  enemy\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ());\cf5 \cb1 \strokec5 \
\
\cb3             \cf11 \strokec11 // Draw bullets\cf5 \cb1 \strokec5 \
\cb3             bullets\cf8 \strokec8 .\cf5 \strokec5 forEach\cf8 \strokec8 (\cf5 \strokec5 bullet \cf8 \strokec8 =>\cf5 \strokec5  bullet\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ());\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf11 \strokec11 // Draw player on top\cf5 \cb1 \strokec5 \
\cb3             player\cf8 \strokec8 .\cf5 \strokec5 draw\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf12 \strokec12 function\cf5 \strokec5  endGame\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             gameRunning \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             gameOver \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             messageText\cf8 \strokec8 .\cf5 \strokec5 textContent \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 `Game Over! Score: \cf8 \strokec8 $\{\cf5 \strokec5 score\cf8 \strokec8 \}\cf9 \strokec9 `\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             messagebox\cf8 \strokec8 .\cf5 \strokec5 style\cf8 \strokec8 .\cf5 \strokec5 display \cf8 \strokec8 =\cf5 \strokec5  \cf9 \strokec9 'flex'\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3         \cf11 \strokec11 // --- Event Listeners ---\cf5 \cb1 \strokec5 \
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'keydown'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             keys\cf8 \strokec8 [\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()]\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cf11 \strokec11 // Use a flag to prevent rapid firing from holding space\cf5 \cb1 \strokec5 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 code \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'Space'\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 gameOver \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 player\cf8 \strokec8 .\cf5 \strokec5 isShooting\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                  player\cf8 \strokec8 .\cf5 \strokec5 shoot\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3                  player\cf8 \strokec8 .\cf5 \strokec5 isShooting \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 true\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Set a flag\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'keyup'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             keys\cf8 \strokec8 [\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()]\cf5 \strokec5  \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \cb1 \strokec5 \
\cb3             \cb1 \
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 code \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'Space'\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 isShooting \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 false\cf8 \strokec8 ;\cf5 \strokec5  \cf11 \strokec11 // Reset flag on key up\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\
\cb3             \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'r'\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 gameOver\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 reload\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3              \cf12 \strokec12 if\cf5 \strokec5  \cf8 \strokec8 (\cf5 \strokec5 e\cf8 \strokec8 .\cf5 \strokec5 key\cf8 \strokec8 .\cf5 \strokec5 toLowerCase\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 ===\cf5 \strokec5  \cf9 \strokec9 'e'\cf5 \strokec5  \cf8 \strokec8 &&\cf5 \strokec5  \cf8 \strokec8 !\cf5 \strokec5 gameOver\cf8 \strokec8 )\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3                 player\cf8 \strokec8 .\cf5 \strokec5 useSpecialItem\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3             \cf8 \strokec8 \}\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\cb3         \cb1 \
\cb3         restartButton\cf8 \strokec8 .\cf5 \strokec5 addEventListener\cf8 \strokec8 (\cf9 \strokec9 'click'\cf8 \strokec8 ,\cf5 \strokec5  \cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 =>\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             init\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \});\cf5 \cb1 \strokec5 \
\
\
\cb3         \cf11 \strokec11 // --- Start Game ---\cf5 \cb1 \strokec5 \
\cb3         window\cf8 \strokec8 .\cf5 \strokec5 onload \cf8 \strokec8 =\cf5 \strokec5  \cf12 \strokec12 function\cf8 \strokec8 ()\cf5 \strokec5  \cf8 \strokec8 \{\cf5 \cb1 \strokec5 \
\cb3             init\cf8 \strokec8 ();\cf5 \cb1 \strokec5 \
\cb3         \cf8 \strokec8 \};\cf5 \cb1 \strokec5 \
\
\cb3     \cf6 \strokec6 </\cf2 \strokec2 script\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 </\cf2 \strokec2 body\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
\cf6 \cb3 \strokec6 </\cf2 \strokec2 html\cf6 \strokec6 >\cf5 \cb1 \strokec5 \
}